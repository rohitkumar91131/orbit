"use client"
import { Sheet, SheetContent } from "@/components/ui/sheet"
import { ScrollArea } from "@/components/ui/scroll-area"
import { HabitDetailProvider, useHabitDetail } from "@/app/context/HabitDetailContext"
import HabitModalNav from "./HabitModalNav"

function ModalBody() {
  const { renderTabContent, habitName } = useHabitDetail()

  return (
    <SheetContent side="right" className="w-[92%] lg:w-[50dvw] h-[100dvh] p-0 border-none bg-white flex flex-col shadow-2xl">
      <div className="h-40 bg-zinc-950 flex items-end p-8 shrink-0 relative overflow-hidden">
        <div className="absolute inset-0 bg-gradient-to-t from-purple-900/40 to-transparent" />
        <div className="relative z-10">
          <p className="text-purple-400 text-[10px] font-black uppercase tracking-widest">Tracking Journey</p>
          <h2 className="text-4xl font-black text-white capitalize">{habitName}</h2>
        </div>
      </div>

      <div className="flex-1 flex flex-col p-6 sm:p-10 overflow-hidden">
        <HabitModalNav />
        <ScrollArea className="flex-1">
          <div className="pb-10">
            {renderTabContent()}
          </div>
        </ScrollArea>
      </div>
    </SheetContent>
  )
}

export default function HabitDetailModal({ habit }) {
  return (
    <HabitDetailProvider habitName={habit.title}>
      {/* Kyunki ye slug page hai, hum isse hamesha open dikhayenge */}
      <Sheet open={true}>
        <ModalBody />
      </Sheet>
    </HabitDetailProvider>
  )
}